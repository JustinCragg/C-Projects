#include "Sprite.h"
#include "Transform.h"
#include "Component.h"

/****************************************************************************************************
****************************************************************************************************/
Sprite::Sprite(SceneObject* parent, const std::string & path) : Component (parent) {
    init(path);
}

/****************************************************************************************************
****************************************************************************************************/
void Sprite::init(const std::string & path) {
    m_componentType = comp::Sprite;

    m_display = true;
    m_filePath = path;

    setTexture(m_filePath);
}

/****************************************************************************************************
****************************************************************************************************/
Sprite::~Sprite() {
    delete m_texture;
}

/****************************************************************************************************
****************************************************************************************************/
void Sprite::setTexture(const std::string & path) {
    m_texture = new aie::Texture(path.c_str());
}

/****************************************************************************************************
****************************************************************************************************/
aie::Texture* Sprite::getTexture() const {
    return m_texture;
}

/****************************************************************************************************
****************************************************************************************************/
void Sprite::draw(aie::Renderer2D* renderer) {
    if (m_display == true) {
        Transform* transform = (Transform*) (m_parent->getComponent(comp::Transform));
        renderer->drawSpriteTransformed3x3(m_texture, transform->getWorldTransform());
    }
}